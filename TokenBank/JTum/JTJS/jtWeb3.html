<body>
    <div></div>
</body>
<script src="bundle.js"></script>

<script>
    
    function setupWebViewJavascriptBridge(callback) {
        if (window.WebViewJavascriptBridge) { return callback(WebViewJavascriptBridge); }
        if (window.WVJBCallbacks) { return window.WVJBCallbacks.push(callback); }
        window.WVJBCallbacks = [callback];
        var WVJBIframe = document.createElement('iframe');
        WVJBIframe.style.display = 'none';
        WVJBIframe.src = 'https://__loaded__';
        document.documentElement.appendChild(WVJBIframe);
        setTimeout(function() { document.documentElement.removeChild(WVJBIframe) }, 0)
    }

    setupWebViewJavascriptBridge(function(bridge) {
                                 
                                 bridge.registerHandler('jt_sign', function(data, responseCallback) {
                                                        
                                                        var paramsjson = JSON.parse(data);
                                                        
                                                        var tx = {};
                                                        tx.Fee = paramsjson.fee;
                                                        
                                                        tx.Flags = 0;
                                                        tx.Sequence = paramsjson.sequence;//通过balance接口拿到这个值
                                                        
                                                        tx.TransactionType = 'Payment';
                                                        tx.Account = paramsjson.account;
                                                        
                                                        tx.Amount = {"value": paramsjson.value, "currency": paramsjson.currency, "issuer": paramsjson.issuer};
                                                        
                                                        tx.Destination = paramsjson.destination;
                                                        
                                                        var sign = jingtumLib.jingtum_sign_tx(tx, {"seed": paramsjson.seed});
                                                        
                                                        responseCallback(sign);
                                                        })
                                 });
</script>
